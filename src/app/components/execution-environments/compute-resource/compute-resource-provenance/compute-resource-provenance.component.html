<div class="">
  <div *ngIf="!qpu" class="d-flex align-content-center justify-content-center">
    <mat-spinner></mat-spinner>
  </div>
  <div *ngIf="qpu" class="row">
    <div class="col-xl-6">
      <mat-card class="m-2">
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title>
              <h3>
                <span title="Provider: IBMQ">{{ qpu.providerId }}</span>
                {{ qpu.backendName }}
              </h3>
            </mat-card-title>
            <mat-card-subtitle>{{ qpu.description }}</mat-card-subtitle>
          </mat-card-title-group>
        </mat-card-header>

        <mat-card-content>
          <mat-list>
            <mat-list-item>
              <mat-icon mat-list-icon>update</mat-icon>
              <div mat-line>
                <strong
                  title="Online since {{
                    qpu.onlineDate | date: 'yy/MM/dd | HH:mm:ss'
                  }}"
                  >{{
                    qpu.lastUpdateDate | date: 'yy/MM/dd | HH:mm:ss'
                  }}</strong
                >
              </div>
              <div mat-line><small>Last Calibration Update</small></div>
            </mat-list-item>
            <mat-list-item *ngFor="let prop of qpuProperties">
              <mat-icon mat-list-icon>{{ prop.icon }}</mat-icon>
              <div mat-line>
                <strong>{{ prop.value }}</strong>
              </div>
              <div mat-line>
                <small>{{ prop.label }}</small>
              </div>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
      </mat-card>
      <mat-card class="m-1">
        <mat-card-header>
          <mat-card-title>Available Gates</mat-card-title>
        </mat-card-header>
        <mat-card-content *ngFor="let bgate of bGates">
          <mat-card-title class="text-primary text-monospace">{{
            bgate.name
          }}</mat-card-title>
          <mat-panel-title class="p-1">
            <strong class="text-monospace">{{ bgate.qasmDef }}</strong>
          </mat-panel-title>
        </mat-card-content>
      </mat-card>
    </div>

    <div class="col-xl-6">
      <mat-card class="m-2">
        <mat-card-header>
          <mat-card-title-group>
            <mat-card-title>
              <h3>Qraph</h3>
            </mat-card-title>
            <mat-card-subtitle>
              <strong>{{ qpu.backendName }}</strong> Qubit Map ·
              <strong>{{ qpu.nqubits }}</strong> Quibits</mat-card-subtitle
            >
          </mat-card-title-group>
        </mat-card-header>
        <mat-card-content class="full-width">
          <div *ngIf="!qGraphEdges || !qGraphNodes">
            <mat-spinner></mat-spinner>
          </div>
          <ngx-graph
            *ngIf="qGraphEdges && qGraphNodes"
            class="chart-container p-1"
            layout="dagre"
            [curve]="curve"
            [draggingEnabled]="false"
            [panningEnabled]="true"
            [enableZoom]="false"
            [autoZoom]="true"
            [autoCenter]="false"
            [showMiniMap]="false"
            [links]="qGraphEdges"
            [nodes]="qGraphNodes"
            [center$]="center$"
            [update$]="update$"
            [zoomToFit$]="zoomToFit$"
          >
            <ng-template #nodeTemplate let-node>
              <svg:g
                class="node"
                ngx-tooltip
                [tooltipPlacement]="'top'"
                [tooltipType]="'tooltip'"
                [tooltipTitle]="node.data.tooltip"
              >
                <circle
                  [attr.r]="node.dimension.width"
                  [attr.cx]="node.dimension.width"
                  [attr.cy]="node.dimension.width"
                  [attr.fill]="node.data.color"
                  class="ng-star-inserted"
                ></circle>

                <svg:text
                  alignment-baseline="central"
                  font-size="large"
                  font-weight="bold"
                  [attr.x]="node.dimension.height / 3"
                  [attr.y]="node.dimension.height / 2"
                >
                  {{ node.label }}
                </svg:text>
              </svg:g>
            </ng-template>
            <ng-template #linkTemplate let-link>
              <svg:g
                class="edge"
                ngx-tooltip
                [tooltipPlacement]="'top'"
                [tooltipType]="'tooltip'"
                [tooltipTitle]="link.data.tooltip"
              >
                <svg:path
                  class="line"
                  stroke-width="2"
                  marker-end="url(#arrow)"
                ></svg:path>
                <!-- <svg:text class="edge-label" text-anchor="middle">
                  <textPath
                    class="text-path"
                    [attr.href]="'#' + link.id"
                    [style.dominant-baseline]="link.dominantBaseline"
                    startOffset="60%"
                  >
                    {{ link.label }}
                  </textPath>
                </svg:text> -->
              </svg:g>
            </ng-template>
            -->
          </ngx-graph>
        </mat-card-content>
        <mat-card-actions>
          <button
            class="m-1"
            (click)="fitGraph()"
            color="accent"
            mat-flat-button
          >
            fit
          </button>
          <button
            class="m-1"
            (click)="centerGraph()"
            color="accent"
            mat-flat-button
          >
            center
          </button>
          <button
            class="m-1"
            (click)="updateGraph()"
            color="warn"
            hidden
            disabled
            mat-flat-button
          >
            update
          </button>
          last update:
          {{ qpu.lastUpdateDate | date: 'MM/dd | HH:mm:ss' }}
        </mat-card-actions>
      </mat-card>
    </div>
  </div>

  <div class="row">
    <div class="col-xl-12 col-lg-12 align-center content-align-center">
      <mat-card class="m-2">
        <mat-card-header>
          <mat-card-title>Gates</mat-card-title>

          <mat-form-field>
            <mat-label>Filter</mat-label>
            <input
              matInput
              (keyup)="applyFilter($event)"
              placeholder="Ex. cx_"
              #input
            />
          </mat-form-field>
        </mat-card-header>
        <mat-card-content>
          <table
            mat-table
            [dataSource]="gateDataSource"
            class="mat-elevation-z8"
            matSort
            matPaginator
            class=""
          >
            <ng-container matColumnDef="gateDate">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Date</th>
              <td mat-cell *matCellDef="let gate">
                {{ gate.gateDate | date: 'yy/MM/dd | HH:mm' }}
              </td>
            </ng-container>
            <ng-container matColumnDef="gate">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Gate</th>
              <td mat-cell *matCellDef="let gate">{{ gate.gate }}</td>
            </ng-container>
            <ng-container matColumnDef="gateError">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Gate Error
              </th>
              <td mat-cell *matCellDef="let gate">{{ gate.gateError }}</td>
            </ng-container>
            <ng-container matColumnDef="gateLength">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Gate Length
              </th>
              <td mat-cell *matCellDef="let gate">{{ gate.gateLength }}</td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="gateTableHeader"></tr>
            <tr
              mat-row
              *matRowDef="let gateDataSource; columns: gateTableHeader"
            ></tr>

            <!-- Row shown when there is no matching data. -->
            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="5">
                No data matching the filter "{{ input.value }}"
              </td>
            </tr>
          </table>
          <mat-paginator
            [pageSizeOptions]="[5, 15, 50, 100]"
            [pageSize]="15"
            showFirstLastButtons
          ></mat-paginator>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
´
